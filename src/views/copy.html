/* instead of defining a Vue instance, export default allows the only
necessary Vue instance (found in main.js) to import your data and methods */
export default {
name: "Ordering",
components: {
Ingredient,
OrderItem,
Bread
},
mixins: [sharedVueStuff], // include stuff that is used in both
// the ordering system and the kitchen
data: function () {
//Not that data is a function!
return {
location: undefined,
chosenIngredients: [],
price: 0,
orderNumber: "",
currentCategory: 4,   // == bread
ingredients: this.ingredients
};
},
created: function () {
this.$store.state.socket.on(
"orderNumber",
function (data) {
this.orderNumber = data;
}.bind(this)
);
},
methods: {
addToOrder: function (item) {
this.chosenIngredients.push(item);
this.price += +item.selling_price;
},
placeOrder: function () {
var i,
//Wrap the order in an object
order = {
ingredients: this.chosenIngredients,
price: this.price
};
// make use of socket.io's magic to send the stuff to the kitchen via the server (app.js)
this.$store.state.socket.emit("order", {order: order});
//set all counters to 0. Notice the use of $refs
for (i = 0; i < this.$refs.ingredient.length; i += 1) {
this.$refs.ingredient[i].resetCounter();
}
this.price = 0;
this.chosenIngredients = [];
},

setLocation: function (location) {
this.location = location;
},

setCurrentCategory: function (category) {
this.currentCategory = category;
},
backtostartpage: function(){
this.location = undefined;
}
}
};
